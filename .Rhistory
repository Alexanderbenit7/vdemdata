install.packages("haven")
install.packages(c("haven", "tidyr"))
setwd("~/")
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# merge both codebooks
colnames(vdem_codebook)[colnames(vdem_codebook) == "name"] <- "tag"
cb <- merge(codebook, vdem_codebook, by = "tag", all.x = TRUE)
summary(cb)
View(codebook)
install.packages("tm")
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
library("tm")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# clean codebook, take out all latex code, etc. in $sources and $aggregation
codebook$sources <- gsub("[\\]", "", codebook$sources)
codebook$aggregation <- gsub("[\\|{}]", "", codebook$aggregation)
codebook$aggregation <- removeWords(codebook$aggregation, out)
# not working perfectly yet...
# what else needs to go out?
out <- c("textit*", "begin*", "\nbeginaligned", "\n*")
codebook$aggregation <- removeWords(codebook$aggregation, out)
var_info <- function(x){
vdem_codebook %>% filter(name == x)
}
# test
var_info("v2x_polyarchy")
var_info <- function(x){
codebook %>% filter(tag == x)
}
# test
var_info("v2x_polyarchy")
h
# not working perfectly yet...
# what else needs to go out?
out <- c("*textit*", "begin*", "\nbeginaligned", "\n*")
codebook$aggregation <- removeWords(codebook$aggregation, out)
var_info <- function(x){
codebook %>% filter(tag == x)
}
# not working perfectly yet...
# what else needs to go out?
out <- c(" textit*", "begin*", "\nbeginaligned", "\n*")
codebook$aggregation <- removeWords(codebook$aggregation, out)
var_info <- function(x){
codebook %>% filter(tag == x)
}
# test
var_info("v2x_polyarchy")
# not working perfectly yet...
# what else needs to go out?
out <- c("\textit*", "begin*", "\nbeginaligned", "\n*")
codebook$aggregation <- removeWords(codebook$aggregation, out)
var_info <- function(x){
codebook %>% filter(tag == x)
}
# test
var_info("v2x_polyarchy")
codebook$aggregation <-  codebook$aggregation %>%
str_replace_all("\\r\\n"," ") %>%
str_extract("Aggregation(s)?:[\\s\\w\\d[:punct:]=\\+\\(\\)\\*/\\^\\âˆ—]+.+") %>%
str_replace("Aggregation(s)?:( )?", "") %>%
str_replace_all("[ ]{2,}", " ") %>%
str_replace(extraction_pattern,"") %>%
str_trim()
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# clean codebook, take out all latex code, etc. mainly in $sources and $aggregation
codebook$sources <- gsub("[\\]", "", codebook$sources)
codebook$aggregation <- gsub("[\\|{}]", "", codebook$aggregation)
codebook$aggregation <- gsub("textit", "", codebook$aggregation)
var_info <- function(x){
codebook %>% filter(tag == x)
}
# test
var_info("v2x_polyarchy")
mycleaner <- function(x){
gsub(y, "", x)
}
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# clean codebook, take out all latex code, etc. mainly in $sources and $aggregation
codebook$sources <- gsub("[\\]", "", codebook$sources)
codebook$aggregation <- gsub("[\\|{}]", "", codebook$aggregation)
mycleaner <- function(x){
gsub(y, "", x)
}
y <- c("textit", "\nendaligned")
mycleaner(codebook$aggregation, y)
mycleaner <- function(x,y){
gsub(y, "", x)
}
y <- c("textit", "\nendaligned")
mycleaner(codebook$aggregation, y)
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# clean codebook, take out all latex code, etc. mainly in $sources and $aggregation
codebook$sources <- gsub("[\\]", "", codebook$sources)
codebook$aggregation <- gsub("[\\|{}]", "", codebook$aggregation)
mycleaner <- function(x,y){
gsub(y, "", x)
}
y <- c("textit", "\nendaligned")
codebook$aggregation <- mycleaner(codebook$aggregation, y)
mycleaner <- function(x,y){
gsub(y, "", x)
}
y <- c("textit|\nendaligned")
codebook$aggregation <- mycleaner(codebook$aggregation, y)
var_info <- function(x){
codebook %>% filter(tag == x)
}
# test
var_info("v2x_polyarchy")
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# clean codebook, take out all latex code, etc. mainly in $sources and $aggregation
# write a cleaner function for this
mycleaner <- function(x,out){
gsub(out, "", x)
}
# what needs to go out:
out <- c("\textit|\nendaligned|[\\]|{}|\n&|\n|\beginequation|\endequation")
# apply:
codebook$source <- mycleaner(codebook$source, y)
# what needs to go out:
out <- c("\textit|\enendaligned|\ndequation|[\\]|{}|\n&|\n|\beginequation")
# apply:
codebook$source <- mycleaner(codebook$source, out)
# what needs to go out:
out <- c("\textit|\enendaligned|\ndequation|[\\]|{}|\n&|\n|\beginequation")
# what needs to go out:
out <- c("\textit|\endaligned|\endequation|[\\]|{}|\n&|\n|\beginequation")
rm(list = ls())
#' Shows all information of a specific variable as given in the codebook
#'
#' Provides information on the scale, aggregation, source and data collection process
#' (project manager(s), question, etc.) of a variable in the V-Dem data set
#'
library("tidyverse")
setwd("~/Dropbox (V-Dem Institute)/seraphine/vdemdata")
#load(file = "data_raw/vdem_codebook.rda")
codebook <- readRDS("data_raw/codebook.rds")
summary(codebook)
# subset codebook, only columns we "need" here
codebook <- codebook[-c(1:3,6,8,12,14,17,18:21,23:32,34:39)]
# clean codebook, take out all latex code, etc. mainly in $sources and $aggregation
# write a cleaner function for this
mycleaner <- function(x,out){
gsub(out, "", x)
}
# what needs to go out:
out <- c("\textit|\endaligned|\endequation|[\\]|{}|\n&|\n|\beginequation")
# what needs to go out:
out <- c("[\\]|{}|\textit|endaligned|endequation|\n&|\n|beginequation")
# apply:
codebook$source <- mycleaner(codebook$source, out)
# what needs to go out:
out <- c("[\\]|{}|textit|endaligned|endequation|\n&|\n|beginequation")
# apply:
codebook$source <- mycleaner(codebook$source, out)
# what needs to go out:
out <- c("[\\]|[{}]|textit|endaligned|endequation|\n&|\n|beginequation")
# apply:
codebook$source <- mycleaner(codebook$source, out)
codebook$aggregation <- mycleaner(codebook$aggregation, out)
# function to extract all variable info:
var_info <- function(x){
codebook %>% filter(tag == x)
}
# test
var_info("v2x_polyarchy")
var_info("v2x_suffr")
